---
// FAQ section with vanilla JavaScript for better reliability
const faqData = [
  {
    question: "Is it safe to use Boost SEO?",
    answer: "Yes, it's completely safe. We focus on authentic engagement patterns, not spam links or PBNs. Our approach mimics natural user behaviour, following Google's guidelines."
  },
  {
    question: "When will I see ranking movement?",
    answer: "Most pages see movement within 48 hours, with greater stabilisation throughout the entire campaign duration. Results may vary depending on keyword competitiveness and domain authority."
  },
  {
    question: "What do I need to provide?",
    answer: "Your target URL, up to 3 target keywords, and the target country. We'll request this information after order confirmation to set up your personalized campaign."
  },
  {
    question: "How does the refund policy work?",
    answer: "If your page doesn't improve in rankings during the campaign duration + 2 days, we refund 100% of the amount. To be eligible, your site must have DA 30+ (Ahrefs), be in the first 2-3 pages of Google (positions 1-30) for the chosen keywords, have keywords relevant to the target location, and existing traffic from that location. See our complete guarantee terms for all requirements and conditions."
  },
  {
    question: "What's the difference between Boost SEO and other services?",
    answer: "We use advanced viral signal simulation technology, focusing on activating Google's 'freshness' algorithms. We don't rely on links or spam, making our approach safer and more effective."
  },
  {
    question: "How many keywords can I include?",
    answer: "We recommend 1 to 3 keywords per campaign for best results. Multiple keywords help diversify signals and increase chances of success."
  },
  {
    question: "Does my site need to have high authority?",
    answer: "For our money-back guarantee, we require DA 30+ (Ahrefs), ranking in the first 2-3 pages (positions 1-30), keywords relevant to the target location, and existing traffic from that location. Sites with lower authority may still get results, but without guarantee."
  },
  {
    question: "Can I use it on client sites?",
    answer: "Yes, we offer solutions for agencies and freelancers. Contact us to learn about our special plans for reselling and managing multiple campaigns."
  },
  {
    question: "⚠️ IMPORTANT: How long do rankings last after the campaign?",
    answer: "Rankings work ONLY during the active campaign. Our guarantee covers the campaign period + 48 hours. After 24-48 hours from the end of the campaign, rankings may naturally sustain OR return to original levels - this depends on your domain authority, keyword competitiveness and content quality. Boost SEO is a TEST that serves to discover your page's rankings potential. If rankings sustain after the campaign, it means your page has real organic potential for that position."
  },
  {
    question: "What are the complete terms of the money-back guarantee?",
    answer: "Our 100% money-back guarantee has specific conditions: (1) Your site must have DA 30+ on Ahrefs, (2) Must be in the first 2-3 pages of Google (positions 1-30) for the keywords, (3) Keywords must be relevant to the target location, (4) Must have existing traffic from the target location, (5) Cannot have used other SEO tactics during the campaign, (6) Refund is processed if NO keyword improves during campaign + 2 days. Contact us to see the complete and detailed guarantee terms."
  }
];
---

<section id="faq" class="py-20 bg-gray-50">
  <div class="container">
    <!-- Section Header -->
    <div class="max-w-3xl mb-16">
      <div class="text-mono text-sm text-gray-500 mb-4">[ FREQUENTLY ASKED QUESTIONS ]</div>
      <h2 class="text-headline brutalist-text mb-6">
        QUESTIONS &<br />
        ANSWERS
      </h2>
      <p class="text-lg text-gray-600">
        Everything you need to know about our Boost SEO system.
      </p>
    </div>

    <!-- FAQ Items -->
    <div class="max-w-4xl mx-auto space-y-4">
      {faqData.map((item, index) => (
        <div
          class="card overflow-hidden hover:border-gray-300 transition-colors faq-item"
          data-index={index}
        >
          <button
            type="button"
            class="w-full px-6 py-5 text-left flex justify-between items-center hover:bg-gray-50 transition-colors duration-150 cursor-pointer faq-button"
          >
            <div class="flex items-center flex-1">
              <div class="w-8 h-8 bg-gray-200 text-gray-600 text-mono font-bold flex items-center justify-center text-sm mr-4 flex-shrink-0">
                {String(index + 1).padStart(2, '0')}
              </div>
              <span class="text-base font-semibold text-gray-900 leading-relaxed">
                {item.question}
              </span>
            </div>
            <div
              class="w-6 h-6 flex items-center justify-center transform transition-transform duration-200 flex-shrink-0 ml-4 faq-icon"
            >
              <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </div>
          </button>
          
          <div class="faq-content overflow-hidden transition-all duration-300 ease-in-out max-h-0 opacity-0">
            <div class="px-6 pb-6">
              <div class="ml-12 border-t border-gray-200 pt-4">
                <p class="text-gray-600 leading-relaxed text-sm">
                  {item.answer}
                </p>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>

    <!-- Contact CTA -->
    <div class="mt-16 text-center">
      <div class="bg-black text-white p-8 rounded-lg max-w-2xl mx-auto">
        <div class="text-mono text-sm text-gray-400 mb-2">[ SUPPORT ]</div>
        <h3 class="text-lg font-bold mb-4">
          Still have questions?
        </h3>
        <p class="text-gray-300 mb-6 text-sm">
          Our technical team is ready to clarify any questions about the system.
        </p>
        <div class="space-y-3">
          <a
            href="mailto:hello@rankingsboost.co.nz"
            class="btn btn-primary text-sm"
          >
            CONTACT SUPPORT
          </a>
          <div class="text-xs">
            <a 
              href="/guarantee" 
              class="text-blue-600 hover:text-blue-700 underline transition-colors"
            >
              See complete guarantee terms
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script is:inline>
  // FAQ functionality - runs after page load
  function initFAQ() {
    const faqButtons = document.querySelectorAll('.faq-button');
    
    faqButtons.forEach((button) => {
      button.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const faqItem = button.closest('.faq-item');
        const content = faqItem.querySelector('.faq-content');
        const icon = faqItem.querySelector('.faq-icon');
        
        if (!content || !icon) return;
        
        // Check if this item is currently open
        const isOpen = content.classList.contains('faq-open');
        
        // Close all items first
        document.querySelectorAll('.faq-content').forEach(c => {
          c.classList.remove('faq-open');
          c.style.maxHeight = '0px';
          c.style.opacity = '0';
        });
        
        document.querySelectorAll('.faq-icon').forEach(i => {
          i.style.transform = 'rotate(0deg)';
        });
        
        // If it wasn't open, open this item
        if (!isOpen) {
          content.classList.add('faq-open');
          content.style.maxHeight = content.scrollHeight + 'px';
          content.style.opacity = '1';
          icon.style.transform = 'rotate(180deg)';
        }
      });
    });
  }
  
  // Initialize on page load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initFAQ);
  } else {
    initFAQ();
  }
  
  // Re-initialize on Astro page navigation
  document.addEventListener('astro:page-load', initFAQ);
</script>

<style>
  .faq-content {
    transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
  }
  
  .faq-icon {
    transition: transform 0.2s ease-in-out;
  }
</style>
